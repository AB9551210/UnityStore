<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>Untiy 资源商店 - 优质3D 2D游戏制作资源平台</title>
		<!-- <script src="https://unpkg.com/vue@next"></script> -->
		<link rel="stylesheet" href="../css/default2.css">
		<link rel="stylesheet" href="../css/cart.css">
		<link rel="stylesheet" href="../css/button.css">
		<link rel="shortcut icon" href="../images/index/icon.ico" type="image/x-icon" /> 
		
		<!--导入核心文件-->
		<script src="../bootstrap3/js/holder.js"></script>
		<link href="../bootstrap3/css/bootstrap.css" rel="stylesheet" type="text/css">
		<script src="../bootstrap3/jquery-1.9.1.min.js"></script>
		<script src="../bootstrap3/js/bootstrap.js"></script>
		<!-- 字体图标 -->
		<link rel="stylesheet" href="../bootstrap3/font-awesome-4.7.0/css/font-awesome.css" />
		<link rel="stylesheet" type="text/css" href="../css/layout.css" />
		<link rel="stylesheet" type="text/css" href="../css/top.css" />
		<link rel="stylesheet" type="text/css" href="../css/footer.css" />
		<link rel="stylesheet" type="text/css" href="../css/cart.css" />
		
	</head>
	<body style="margin:0">
	<div id="over">
		<div id="nav">
		<div id="navtop">
			<div id="icon">
				<img src="../images/index/upicon.svg" height="32px" width="200px">
			</div>
			<div id="jump">
				<ul id="jump2">
					<li>Asset</li>
					<li>工具</li>
					<li>服务</li>
					<li>Untiy官方资源</li>
					<li>行业</li>
				</ul>
			</div>
			<div id="user">
				<img id="up1" style="width: 30px;" src="../images/index/up1.png">
				<img id="up2" style="width: 30px;" src="../images/index/up2.png">
				<img id="up3" style="width: 30px;" src="../images/index/up3.png">
			</div>
		</div>
		<div id="navbottom">
			<div id="ser">
				<img src="../images/index/sousuo.svg">
				<input type="text" name="se" id="se" value="       搜索资源"/>
			</div>
		</div>
		</div>
<div class="container">
			<div class="col-md-offset-1 col-md-10">
				<div class="panel panel-primary">
					<div class="panel-heading">
						<p class="panel-title"><span class="fa fa-shopping-cart"></span> 购物车</p>
					</div>
					<div class="panel-body">
						<form action="orderConfirm.html" role="form" >
							<!--购物车表格开始-->
							<table class="cart-table" width="100%">
								<thead>
									<tr>
										<th width="8%">
											<input type="checkbox" class="ckall" onclick="checkall(this)" />全选</th>
										<th width="110"></th>
										<th width="29%">商品</th>
										<th width="11%">单价</th>
										<th width="15%">数量</th>
										<th width="11%">金额</th>
										<th>操作</th>
									</tr>
								</thead>
								<tbody id="cart-list" class="cart-body">
									<tr>
										<td>
											<input type="checkbox" class="ckitem" />
										</td>
										<td><img src="../images/portal/12DELLXPS13-silvery/collect.png" class="img-responsive" /></td>
										<td>联想(Lenovo)小新Air13 Pro 13.3英寸14.8mm超轻薄笔记本电脑</td>
										<td>¥<span id="goodsPrice1">5298</span></td>
										<td>
											<input type="button" value="-" class="num-btn" onclick="reduceNum(1)" />
											<input id="goodsCount1" type="text" size="2" readonly="readonly" class="num-text" value="1">
											<input class="num-btn" type="button" value="+" onclick="addNum(1)" />
										</td>
										<td><span id="goodsCast1"></span></td>
										<td>
											<input type="button" onclick="delCartItem(this)" class="cart-del btn btn-default btn-xs" value="删除" />
										</td>
									</tr>
									<tr>
										<td>
											<input type="checkbox" class="ckitem" />
										</td>
										<td><img src="../images/portal/16LenovoYOGA900green/collect.png" class="img-responsive" /></td>
										<td>戴尔(DELL)XPS13-9360-R1609 13.3</td>
										<td>¥<span id="goodsPrice2">4988</span></td>
										<td>
											<input type="button" value="-" class="num-btn" onclick="reduceNum(2)" />
											<input id="goodsCount2" type="text" size="2" readonly="readonly" class="num-text" value="1">
											<input class="num-btn" type="button" value="+" onclick="addNum(2)" />
										</td>
										<td><span id="goodsCast2"></span></td>
										<td>
											<input type="button" onclick="delCartItem(this)" class="cart-del btn btn-default btn-xs" value="删除" />
										</td>
									</tr>
									<tr>
										<td>
											<input type="checkbox" class="ckitem" />
										</td>
										<td><img src="../images/portal/13LenovoIdeaPad310_silvery/collect.png" class="img-responsive" /></td>
										<td>戴尔(DELL)魔方15MF Pro-R2505TSS灵越</td>
										<td>¥<span id="goodsPrice3">4699</span></td>
										<td>
											<input type="button" value="-" class="num-btn" onclick="reduceNum(3)" />
											<input id="goodsCount3" type="text" size="2" readonly="readonly" class="num-text" value="1">
											<input class="num-btn" type="button" value="+" onclick="addNum(3)" />
										</td>
										<td><span id="goodsCast3"></span></td>
										<td>
											<input type="button" onclick="delCartItem(this)" class="cart-del btn btn-default btn-xs" value="删除" />
										</td>
									</tr>
								</tbody>
							</table>
							<div class="total-bar">
								<a href="javascript:selDelCart()" class="cart-del-sel btn btn-default btn-xs">删除所选商品</a>
								<span class="pull-right">已选商品
								<span id="selectCount">0</span>件 总价¥
								<span id="selectTotal">0</span>元
								</span>
							</div>
							<div>
								<span class="pull-right">
								<input type="submit" value="  结  算  " class="btn btn-primary btn-lg link-account" />
							</span>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
		<div id="infobottom">
			<div id="logo">
				<img style="margin-top: 5%;" src="../images/index/logo.svg" >
			</div>
			<div id="infoOne">
				<div id="Int">
					<ul>
						<li style="color: white;font-weight: 700;">语言</li>
						<br >
						<li>English</li>
						<li>简体中文</li>
						<li>한국어</li>
						<li>日本語</li>
					</ul>
					<ul>
						<li style="color: white;font-weight: 700;">通过Unity出售资源</li>
						<br>
						<li>出售资源</li>
						<li>资源上传指南</li>
						<li>资源商店工具</li>
						<li>发布商登录</li>
						<li>常见问题</li>
					</ul>
					<ul>
						<li style="color: white;font-weight: 700;">发现</li>
						<br>
						<li>最畅销资源</li>
						<li>免费资源排行</li>
						<li>付费资源排行</li>
						<li>Asset Store资源商店博客</li>
					</ul>
					<ul>
						<li style="color: white;font-weight: 700;">Affiliate计划</li>
						<br>
						<li>成员资格</li>
						<li>Link Maker</li>
						<li>Affiliate Id</li>
					</ul>	
					<div id="Asset">
						<h4>关注Asset Store资源商店</h4>
						<img src="../images/index/bottomimg.png" >
					</div>
				</div>
			</div>
			<div id="infoTwo">
				<ul>
					<li style="color: white;font-weight: 700;">帮助</li>
					<br>
					<li>常见问题</li>
					<li>客户服务</li>
				</ul>
				<ul>
					<li style="color: white;font-weight: 700;">反馈</li>
					<br>
					<li>提交反馈</li>
				</ul>
				<ul>
					<li style="color: white;font-weight: 700;">合作伙伴计划</li>
					<br>
					<li>合作伙伴</li>
				</ul>	
				<ul>
					<li style="color: white;font-weight: 700;">Download</li>
					<br>
					<li>Get Unity</li>
					<li>Download Archive</li>
					<li>Beta Program</li>
				</ul>		
				<hr style="background-color: #494A4B;border:none;height:2px;">								
			</div>
			<div id="infoCopy">
				<font size="2" color="#afafaf">Copyright © 2021 &nbsp;Unity &nbsp;Technologies &nbsp;所有价格不包含税</font>
				<font size="2" color="#c736a2"> &nbsp;服务条款和协议 &nbsp; Cookies &nbsp; Site Map &nbsp;不要出售我的个人信息</font>
			</div>
		</div>
	</div>
	</body>
	<script src="../js/jquery-3.6.0.js"></script>
	<script type="text/javascript" src="../js/jquery-getUrlParam.js"></script>
	<script type="text/javascript">
		let id = $.getUrlParam("id");
		console.log("id=" + id);
		$(document).ready(function() {
			$.ajax({
				url: "/products/" + id + "/details",
				type: "GET",
				dataType: "JSON",
				success: function(json) {
					if (json.state == 200) {
						let list = json.data;
						let html =   '<div id="imgshow"><img src="..#{image}collect.jpg"></div>'
									+  '<div id="">'
									+  '<div id="nameshow"><h3 style="margin-top: 0px;">#{title}</h3></div>'
									+  '<div id="priceshow">￥#{afterprice}</div>'
									+  '<img src="../images/index/proshow.jpg" style="width: 300px;padding-top:20px;padding-left:40px;">'
									+  '<div id="" class="btn-gradient red block " style="width: 260px;margin-left:40px;">立即购买</div>'
									+  '<div id="btn-add-to-cart" class="btn-gradient green block" style="width: 260px;margin-left:40px;">加入购物车</div>'
									+'</div>'
													
						html = html.replace(/#{title}/g, list.title);
						html = html.replace(/#{image}/g, list.image);
						html = html.replace(/#{afterprice}/g, list.afterprice);
									
						$("#container").append(html);						

					} else if (json.state == 4006) { // 商品数据不存在的异常
						location.href = "index.html";
					} else {
						alert("获取商品信息失败！" + json.message);
					}
				}
			});
		});

		$("#btn-add-to-cart").click(function() {
			$.ajax({
				url: "/carts/add_to_cart",
				type: "POST",
				data: {
					"pid": id,
				},
				dataType: "JSON",
				success: function(json) {
					if (json.state == 200) {
						alert("增加成功！");
					} else {
						alert("增加失败！" + json.message);
					}
				},
				error: function(xhr) {
					alert("您的登录信息已经过期，请重新登录！HTTP响应码：" + xhr.status);
					location.href = "login.html";
				}
			});
		});
	</script>
</html>
